/*!
* country-region-selector
* ------------------------
* 0.2.3
* @author Ben Keen
* @repo https://github.com/benkeen/country-region-selector
* @licence MIT
*/
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b(require()):a.crs=b(a)}(this,function(){"use strict";var a="crs-country",b="Select country",c="Select region",d=!0,e=!0,f=[],g=[["Canada","CA","Alberta~AB|British Columbia~BC|Manitoba~MB|New Brunswick~NB|Newfoundland and Labrador~NL|Northwest Territories~NT|Nova Scotia~NS|Nunavut~NU|Ontario~ON|Prince Edward Island~PE|Quebec~QC|Saskatchewan~SK|Yukon~YT"],["United States","US","Alaska~AK|Alabama~AL|American Samoa~AS|Arizona~AZ|Arkansas~AR|California~CA|Colorado~CO|Connecticut~CT|Delaware~DE|District of Columbia~DC|Micronesia~FM|Florida~FL|Georgia~GA|Guam~GU|Hawaii~HI|Idaho~ID|Illinois~IL|Indiana~IN|Iowa~IA|Kansas~KS|Kentucky~KY|Louisiana~LA|Maine~ME|Marshall Islands~MH|Maryland~MD|Massachusetts~MA|Michigan~MI|Minnesota~MN|Mississippi~MS|Missouri~MO|Montana~MT|Nebraska~NE|Nevada~NV|New Hampshire~NH|New Jersey~NJ|New Mexico~NM|New York~NY|North Carolina~NC|North Dakota~ND|Northern Mariana Islands~MP|Ohio~OH|Oklahoma~OK|Oregon~OR|Palau~PW|Pennsylvania~PA|Puerto Rico~PR|Rhode Island~RI|South Carolina~SC|South Dakota~SD|Tennessee~TN|Texas~TX|Utah~UT|Vermont~VT|Virgin Islands~VI|Virginia~VA|Washington~WA|West Virginia~WV|Wisconsin~WI|Wyoming~WY|Armed Forces Americas~AA|Armed Forces Europe, Canada, Africa and Middle East~AE|Armed Forces Pacific~AP"]],h=function(){for(var b=document.getElementsByClassName(a),c=0;c<b.length;c++)i(b[c])},i=function(a){var c=a.getAttribute("data-crs-loaded");if("true"!==c){a.length=0;var e=a.getAttribute("data-default-option"),g=e?e:b,h=a.getAttribute("data-show-default-option");d=null===h?!0:"true"===h;var i=a.getAttribute("data-default-value"),l=a.getAttribute("data-value"),o=0;d&&(a.options[0]=new Option(g,"")),k({whitelist:a.getAttribute("data-whitelist"),blacklist:a.getAttribute("data-blacklist")});for(var p=0;p<f.length;p++){var q="shortcode"===l||"2-char"===l?f[p][1]:f[p][0];a.options[a.length]=new Option(f[p][0],q),null!=i&&i===q&&(o=p,d&&o++)}a.selectedIndex=o;var r=a.getAttribute("data-region-id");if(!r)return void console.error("Missing data-region-id on country-region-selector country field.");var s=document.getElementById(r);if(s)if(j(s),a.onchange=function(){n(a,s)},null!==i&&a.selectedIndex>0){n(a,s);var t=s.getAttribute("data-default-value"),u="shortcode"===s.getAttribute("data-value");if(null!==t){var v=f[a.selectedIndex-1][3];m(s,v,t,u)}}else d===!1&&n(a,s);else console.error("Region dropdown DOM node with ID "+r+" not found.");a.setAttribute("data-crs-loaded","true")}},j=function(a){var b=a.getAttribute("data-blank-option"),c=b?b:"-",d=a.getAttribute("data-show-default-option");e=null===d?!0:"true"===d,a.length=0,e&&(a.options[0]=new Option(c,""),a.selectedIndex=0)},k=function(a){var b=g,c=[],d=0;if(a.whitelist){var e=a.whitelist.split(",");for(d=0;d<g.length;d++)-1!==e.indexOf(g[d][1])&&c.push(g[d]);b=c}else if(a.blacklist){var h=a.blacklist.split(",");for(d=0;d<g.length;d++)-1===h.indexOf(g[d][1])&&c.push(g[d]);b=c}f=b,l()},l=function(){for(var a=0;a<f.length;a++){for(var b={hasShortcodes:/~/.test(f[a][2]),regions:[]},c=f[a][2].split("|"),d=0;d<c.length;d++){var e=c[d].split("~");b.regions.push([e[0],e[1]])}f[a][3]=b}},m=function(a,b,c,d){for(var e=0;e<b.regions.length;e++){var f=d&&b.hasShortcodes&&b.regions[e][1]?b.regions[e][1]:b.regions[e][0];if(f===c){a.selectedIndex=e+1;break}}},n=function(a,b){var g=d?a.selectedIndex-1:a.selectedIndex,h=b.getAttribute("data-default-option"),i=b.getAttribute("data-value"),k=h?h:c;if(""===a.value)j(b);else{b.length=0,e&&(b.options[0]=new Option(k,""));for(var l=f[g][3],m=0;m<l.regions.length;m++){var n="shortcode"===i&&l.hasShortcodes?l.regions[m][1]:l.regions[m][0];b.options[b.length]=new Option(l.regions[m][0],n)}b.selectedIndex=0}},o=function(a,b){var c=!1,d=!0,e=a.document,f=e.documentElement,g=e.addEventListener?"addEventListener":"attachEvent",h=e.addEventListener?"removeEventListener":"detachEvent",i=e.addEventListener?"":"on",j=function(d){("readystatechange"!=d.type||"complete"==e.readyState)&&(("load"==d.type?a:e)[h](i+d.type,j,!1),!c&&(c=!0)&&b.call(a,d.type||d))},k=function(){try{f.doScroll("left")}catch(a){return void setTimeout(k,50)}j("poll")};if("complete"==e.readyState)b.call(a,"lazy");else{if(e.createEventObject&&f.doScroll){try{d=!a.frameElement}catch(l){}d&&k()}e[g](i+"DOMContentLoaded",j,!1),e[g](i+"readystatechange",j,!1),a[g](i+"load",j,!1)}};return o(window,h),{init:h}});